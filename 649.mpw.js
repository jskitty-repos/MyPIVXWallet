var MPW;(()=>{var t,e,r,n,s={5858:(t,e,r)=>{"use strict";var n=r(8764),s=r(7748);function i(t){return n.Buffer.from(t).toString("hex")}var o=r(7760),a=r(2697);r(2153);const c=10**8,u={current:null,main:{collateralInSats:1e12,isTestnet:!1,TICKER:"PIV",PUBKEY_PREFIX:["D"],STAKING_PREFIX:"S",PUBKEY_ADDRESS:30,SECRET_KEY:212,BIP44_TYPE:119,BIP44_TYPE_LEDGER:77,PROTOCOL_VERSION:70926,MASTERNODE_PORT:51472,Explorers:[{name:"rockdev",url:"https://explorer.rockdev.org"},{name:"zkBitcoin",url:"https://zkbitcoin.com"}],Nodes:[{name:"duddino",url:"https://rpc.duddino.com/mainnet"}],Consensus:{UPGRADE_V6_0:void 0}},testnet:{collateralInSats:1e12,isTestnet:!0,TICKER:"tPIV",PUBKEY_PREFIX:["x","y"],STAKING_PREFIX:"W",PUBKEY_ADDRESS:139,SECRET_KEY:239,BIP44_TYPE:1,BIP44_TYPE_LEDGER:1,PROTOCOL_VERSION:70926,MASTERNODE_PORT:51474,Explorers:[{name:"rockdev",url:"https://testnet.rockdev.org"}],Nodes:[{name:"duddino",url:"https://rpc.duddino.com/testnet"}],Consensus:{UPGRADE_V6_0:void 0}}};u.current=u.main,r(5108),r(6192);var l=r(7191),d=r.n(l);function p(t=32){return crypto.getRandomValues(new Uint8Array(t))}function h(t,e,r){const n=t.length;if(n-r-e.length<0){const t="CRITICAL: Overflow detected ("+(n-r-e.length)+"), possible state corruption, backup and refresh advised.";throw function(t,e,r=[],n=0){const s=document.createElement("div");s.classList.add("alertpop"),s.classList.add(t),setTimeout((()=>{s.style.opacity="1",s.style.zIndex="999999",s.classList.add("bounce-ani"),s.classList.add("bounce")}),100),"number"==typeof r&&(n=r,r=[]);const i=function(t,e){return e.forEach((e=>{t=t.replaceAll("{"+Object.keys(e)[0]+"}",Object.values(e)[0])})),t}(e,r);s.innerHTML=i,s.destroy=()=>{clearTimeout(s.timer),s.style.opacity="0",setTimeout((()=>{s.remove()}),600)},s.addEventListener("click",s.destroy),n>0&&(s.timer=setTimeout(s.destroy,n)),P.domAlertPos.appendChild(s)}("warning",t,5e3),Error(t)}let s=0;for(;r<n;)t[r++]=e[s++]}r(9755);const f=new(r(7187).EventEmitter);class g{cData={};strName="";strEndpoint="";async ensureCacheExists(){this.cData&&Object.keys(this.cData).length||await this.fetch()}async fetch(){return this.cData=await(await fetch(this.strEndpoint)).json()}}let m="usd",v=new class extends g{constructor(){super(),this.strName="CoinGecko",this.strEndpoint="https://api.coingecko.com/api/v3/coins/pivx?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false"}async getPrice(t){return await this.ensureCacheExists(),this.cData.market_data.current_price[t]}async getCurrencies(){return await this.ensureCacheExists(),Object.keys(this.cData.market_data.current_price)}},O=(u.current.Explorers[0],u.current.Nodes[0],{hit:"A ping indicating an app load, no unique data is sent.",time_to_sync:"The time in seconds it took for MPW to last synchronise.",transaction:"A ping indicating a Tx, no unique data is sent, but may be inferred from on-chain time."});Object.keys(O);r(5108);var y=r(5108);class E{constructor({id:t,path:e,sats:r,script:n,vout:s,height:i,status:o,isDelegate:a=!1,isReward:c=!1}={}){this.id=t,this.path=e,this.sats=r,this.script=n,this.vout=s,this.height=i,this.status=o,this.isDelegate=a,this.isReward=c}equalsUTXO(t){return this.id===t.id&&this.vout===t.vout&&this.status===t.status}}class T{constructor(){this.UTXOs=[],this.subscribeToNetwork()}static CONFIRMED=0;static REMOVED=1;static PENDING=2;async removeWithDelay(t,e){var r;await(r=60*t*1e3,new Promise(((t,e)=>setTimeout(t,r)))),this.removeUTXO(e)}isAlreadyStored({id:t,vout:e,status:r}){return this.UTXOs.some((n=>n.id===t&&n.vout===e&&(!r||n.status===r)))}getUTXOsByState(t){return this.UTXOs.filter((e=>e.status===t))}removeFromState(t,e){const r=this.getUTXOsByState(e);for(const e of r)if(e.id===t.id&&e.vout===t.vout){this.removeUTXO(e);break}}addUTXO({id:t,path:e,sats:r,script:n,vout:s,height:i,status:o,isDelegate:a,isReward:c}){const u=new E({id:t,path:e,sats:r,script:n,vout:s,height:i,status:o,isDelegate:a,isReward:c});this.isAlreadyStored({id:t,vout:s})?this.updateUTXO({id:t,vout:s}):this.UTXOs.push(u),S(!0),b(!0)}updateUTXO({id:t,vout:e}){const r=this.UTXOs.find((r=>r.id===t&&r.vout==e));r.status===T.PENDING&&(r.status=T.CONFIRMED),S(!0),b(!0)}removeUTXO(t){this.UTXOs=this.UTXOs.filter((e=>!e.equalsUTXO(t)))}autoRemoveUTXO({id:t,vout:e}){for(const r of this.UTXOs)if(r.id===t&&r.vout===e)return r.status=T.REMOVED,void this.removeWithDelay(12,r);y.error("Mempool: Failed to find UTXO "+t+" ("+e+") for auto-removal!")}autoRemoveUTXOs(t){for(const e of t)for(const t of this.UTXOs)if(t.equalsUTXO(e)){t.status=T.REMOVED,this.removeWithDelay(12,t);break}}getConfirmed(){return this.getUTXOsByState(T.CONFIRMED)}getStandardUTXOs(){return this.UTXOs.filter((t=>t.status!==T.REMOVED&&!t.isDelegate))}getDelegatedUTXOs(){return this.UTXOs.filter((t=>t.status!==T.REMOVED&&t.isDelegate))}getBalance(){return this.getStandardUTXOs().filter((t=>!function(t,e=null){const r=e||JSON.parse(localStorage.getItem("masternode"));if(r){const{collateralTxId:e,outidx:n}=r;return e===t.id&&t.vout===n}return!1}(t))).reduce(((t,e)=>t+e.sats),0)}static isValidUTXO(t){return!t.isReward||null.cachedBlockCount-t.height>100}getDelegatedBalance(){return this.getDelegatedUTXOs().reduce(((t,e)=>t+e.sats),0)}subscribeToNetwork(){f.on("utxo",(async t=>{for(const e of t)this.isAlreadyStored({id:e.txid,vout:e.vout})?this.updateUTXO({id:e.txid,vout:e.vout}):this.addUTXO(await null.getUTXOFullInfo(e))}))}}r(1555),r(5108),r(9424),r(5108),new TextEncoder,new TextDecoder,r(3006),r(9755),r(5108);let P={};const U=new T;function S(t=!1){const e=U.getBalance(),r=e/c;if(t){const t=r.toFixed(2).length;P.domGuiBalance.innerText=r.toFixed(t>=6?0:2),P.domAvailToDelegate.innerText="Available: ~"+r.toFixed(2)+" "+u.current.TICKER,v.getPrice(m).then((t=>{const e=Intl.supportedValuesOf("currency").includes(m.toUpperCase())?{style:"currency",currency:m,currencyDisplay:"narrowSymbol"}:{maximumFractionDigits:8,minimumFractionDigits:8};let n=r*t;P.domGuiBalanceValue.innerText=n.toLocaleString("en-gb",e),P.domGuiBalanceValueCurrency.innerText=m.toUpperCase(),P.domSendAmountValueCurrency.innerText=m.toUpperCase(),P.domSendAmountCoinsTicker.innerText=u.current.TICKER}))}return e}function b(t=!1){const e=U.getDelegatedBalance();return t&&(P.domGuiBalanceStaking.innerText=Math.floor(e/c),P.domGuiBalanceBoxStaking.style.fontSize=Math.floor(e/c).toString().length>=4?"large":"x-large",P.domAvailToUndelegate.innerText="Staking: ~"+(e/c).toFixed(2)+" "+u.current.TICKER),e}function D({pkBytes:t,publicKey:e,output:r="ENCODED"}){if(!t&&!e)return null;const c="UNCOMPRESSED_HEX"!==r;let l=e?(p=e,n.Buffer.from(p,"hex")):o.$3(t,c);var p;if("UNCOMPRESSED_HEX"===r){if(65!==l.length)throw new Error("Can't uncompress an already compressed key");return i(l)}if(65===l.length&&(l=function(t){if(65!=t.length)throw new Error("Attempting to compress an invalid uncompressed key");const e=t.slice(1,33);return[t.slice(33)[31]%2==0?2:3,...e]}(l)),33!=l.length)throw new Error("Invalid public key");if("COMPRESSED_HEX"===r)return i(l);const f=(0,s.J)(new Uint8Array(l)),g=(0,a.b)(f),m=new Uint8Array(21);var v;m[0]=u.current.PUBKEY_ADDRESS,h(m,g,1);const O=(v=m,(0,s.J)((0,s.J)(new Uint8Array(v)))).slice(0,4),y=new Uint8Array(25);return h(y,m,0),h(y,O,21),d().encode(y)}r(9840),r(2099),r(7578),r(4611),r(9755),r(5108),new Map([[25870,"Open the PIVX app on your device"],[25873,"Open the PIVX app on your device"],[57408,"Navigate to the PIVX app on your device"],[27157,"Wrong app! Open the PIVX app on your device"],[27266,"Wrong app! Open the PIVX app on your device"],[27904,"Wrong app! Open the PIVX app on your device"],[27010,"Unlock your Ledger, then try again!"],[27404,"Unlock your Ledger, then try again!"]]),onmessage=function(t){for(;;){const t={};t.priv=p(),t.pub=D({pkBytes:t.priv}),postMessage(t)}}},5856:()=>{},6601:()=>{},9214:()=>{},2361:()=>{},4616:()=>{}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,loaded:!1,exports:{}};return s[t].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=s,o.x=()=>{var t=o.O(void 0,[418],(()=>o(5858)));return o.O(t)},t=[],o.O=(e,r,n,s)=>{if(!r){var i=1/0;for(l=0;l<t.length;l++){for(var[r,n,s]=t[l],a=!0,c=0;c<r.length;c++)(!1&s||i>=s)&&Object.keys(o.O).every((t=>o.O[t](r[c])))?r.splice(c--,1):(a=!1,s<i&&(i=s));if(a){t.splice(l--,1);var u=n();void 0!==u&&(e=u)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[r,n,s]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},r=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var s=Object.create(null);o.r(s);var i={};e=e||[null,r({}),r([]),r(r)];for(var a=2&n&&t;"object"==typeof a&&!~e.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>t[e]));return i.default=()=>t,o.d(s,i),s},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((e,r)=>(o.f[r](t,e),e)),[])),o.u=t=>"./"+t+".mpw.js",o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{o.b=self.location+"";var t={649:1};o.f.i=(e,r)=>{t[e]||importScripts(o.p+o.u(e))};var e=self.webpackChunkMPW=self.webpackChunkMPW||[],r=e.push.bind(e);e.push=e=>{var[n,s,i]=e;for(var a in s)o.o(s,a)&&(o.m[a]=s[a]);for(i&&i(o);n.length;)t[n.pop()]=1;r(e)}})(),n=o.x,o.x=()=>o.e(418).then(n);var a=o.x();MPW=a})();
//# sourceMappingURL=649.mpw.js.map